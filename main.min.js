var backGround,highScore,posxHead=0,posyHead=0,posxApple=0,posyApple=0,time=0,fieldHeight=25,fieldWidth=55,listx=[],listy=[],thisx=0,thisy=0,lastkey="",intervals=[],snakeLen=0;null==localStorage.getItem("highScore")?(highScore=0,localStorage.setItem("highScore",highScore)):highScore=localStorage.getItem("highScore");var started=!1;function wait(e){const a=Date.now();let t=null;do{t=Date.now()}while(t-a<e)}function clear(e){background.removeClass(e)}function applePos(e,a){$("."+e.toString()+"-"+a.toString()).addClass("apple")}function headPos(e,a){$("."+e.toString()+"-"+a.toString()).addClass("head")}function mainHeadPos(e,a){clear("mainHead"),posxHead=e,posyHead=a,$("."+e.toString()+"-"+a.toString()).addClass("mainHead"),$("."+e.toString()+"-"+a.toString()).removeClass("head")}function randApple(){for($("."+posxApple.toString()+"-"+posyApple.toString()).removeClass("apple"),posxApple=Math.round(Math.random()*(fieldWidth-1)+1),posyApple=Math.round(Math.random()*(fieldHeight-1)+1);$("."+posxApple.toString()+"-"+posyApple.toString()).hasClass("head");)posxApple=Math.round(Math.random()*(fieldWidth-1)+1),posyApple=Math.round(Math.random()*(fieldHeight-1)+1);applePos(posxApple,posyApple)}function chart(e,a,t){var o;for(listx.unshift(e),listy.unshift(a),o=0;o<=t;o++)$("."+listx[t-o].toString()+"-"+listy[t-o].toString()).addClass("head");$("."+listx[t+1].toString()+"-"+listy[t+1].toString()).removeClass("head")}posxHead=Math.round(Math.random()*(fieldWidth-1)+1),posyHead=Math.round(Math.random()*(fieldHeight-1)+1);var increment=40,bodyIncrement=3;function checkScore(){snakeLen>highScore&&(highScore=snakeLen,localStorage.setItem("highScore",highScore)),document.getElementById("highscore").innerHTML="High Score: "+(highScore/bodyIncrement).toString(),document.getElementById("score").innerHTML="Score: "+(snakeLen/bodyIncrement).toString()}function start(){if(0==time)for(var e=1;e<=fieldWidth;e++){$("#mainRow").append('<div class = "col col-'+e.toString()+'"></div>');for(var a=1;a<=fieldHeight;a++)$(".col-"+e.toString()).append('<span class = "blockGround '+e.toString()+"-"+a.toString()+'"></span>')}background=$(".blockGround"),background.removeClass("head").removeClass("mainHead"),listx=[0,1],listy=[0,1],intervals.forEach(window.clearInterval),randApple(),$("."+posxHead.toString()+"-"+posyHead.toString()).removeClass("head"),$("."+posxHead.toString()+"-"+posyHead.toString()).removeClass("mainHead"),posxHead=Math.round(Math.random()*(fieldWidth-1)+1),posyHead=Math.round(Math.random()*(fieldHeight-1)+1),headPos(posxHead,posyHead),started=!0,snakeLen=0,checkScore(),time++}function isTouching(){var e;return $("."+posxHead.toString()+"-"+posyHead.toString()).hasClass("mainHead")&&$("."+posxHead.toString()+"-"+posyHead.toString()).hasClass("head")&&(e=!0),e}function appleTouched(){snakeLen+=bodyIncrement,checkScore(),randApple()}function isGameOver(){return(posxHead>fieldWidth||posxHead<=0||posyHead>=fieldHeight+1||posyHead<=0||isTouching())&&snakeLen!==fieldHeight*fieldWidth}function endGame(){start()}class arrows{static left(){isGameOver()&&endGame(),$("."+(posxApple+1).toString()+"-"+posyApple.toString()).hasClass("mainHead")&&appleTouched(),lastkey="left",thisx=posxHead,thisy=posyHead,mainHeadPos(posxHead-=1,posyHead),chart(thisx,thisy,snakeLen)}static right(){isGameOver()&&endGame(),$("."+(posxApple-1).toString()+"-"+posyApple.toString()).hasClass("mainHead")&&appleTouched(),thisx=posxHead,thisy=posyHead,lastkey="right",mainHeadPos(posxHead+=1,posyHead),chart(thisx,thisy,snakeLen)}static up(){isGameOver()&&endGame(),$("."+posxApple.toString()+"-"+(posyApple+1).toString()).hasClass("mainHead")&&appleTouched(),thisx=posxHead,thisy=posyHead,lastkey="up",mainHeadPos(posxHead,posyHead-=1),chart(thisx,thisy,snakeLen)}static down(){isGameOver()&&endGame(),$("."+posxApple.toString()+"-"+(posyApple-1).toString()).hasClass("mainHead")&&appleTouched(),lastkey="down",thisx=posxHead,thisy=posyHead,mainHeadPos(posxHead,posyHead+=1),chart(thisx,thisy,snakeLen)}}function end(){started=!started}function keydown(e){var a=e.key;if(" "===a&&start(),started)if(snakeLen===fieldHeight*fieldWidth)window.alert("You Won! Congratulations");else if("ArrowLeft"!=a&&"a"!=a||"right"===lastkey&&0!==snakeLen)if("ArrowRight"!=a&&"d"!=a||"left"===lastkey&&0!==snakeLen)if("ArrowUp"!=a&&"w"!=a||"down"===lastkey&&0!==snakeLen){if(!("ArrowDown"!=a&&"s"!=a||"up"===lastkey&&0!==snakeLen)){intervals.forEach(window.clearInterval);var t=window.setInterval(arrows.down,increment);intervals.push(t)}}else{intervals.forEach(window.clearInterval);var o=window.setInterval(arrows.up,increment);intervals.push(o)}else{intervals.forEach(window.clearInterval);var n=window.setInterval(arrows.right,increment);intervals.push(n)}else{intervals.forEach(window.clearInterval);var s=window.setInterval(arrows.left,increment);intervals.push(s)}}window.addEventListener("keydown",keydown);
